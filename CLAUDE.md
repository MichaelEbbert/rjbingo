# Dio Bingo

Party game web app for listening to Ronnie James Dio's music on shuffle and marking off fantasy-themed words on printed bingo cards.

## Quick Start

```bash
python init_db.py   # Create and seed bingo.db
python app.py       # Start server at http://localhost:5001
```

## Tech Stack

- **Python + Flask** — backend and routing
- **HTMX** — dynamic album/song selection without full page reloads (CDN, v2.0.4)
- **SQLite** — song and word database (`bingo.db`, gitignored, regenerated by `init_db.py`)
- **Jinja2** — templating (built into Flask)
- **CSS** — custom styles with dark theme + print stylesheet (no framework)
- **Internal Port:** 5001

## Project Structure

```
app.py              — Flask app, all routes, card generation logic
init_db.py          — Database seeding script (albums, songs, words, mappings)
schema.sql          — SQLite schema (4 tables)
bingo.db            — SQLite database (generated, gitignored)
templates/
  base.html         — Base template with HTMX script tag
  index.html        — Album/song selection page with JS for era toggles and word count
  _songs.html       — HTMX partial: expandable song list per album
  cards.html        — HTMX partial: generated bingo card grids
  print.html        — Full-page print layout (auto-triggers print dialog)
static/
  style.css         — Dark theme styles + print stylesheet + mobile responsive
```

## Database Schema

- **albums** (id, title, year, artist_credit) — 16 albums
- **songs** (id, album_id, title, track_number) — 146 songs
- **words** (id, word) — 104 unique fantasy/dramatic words
- **song_words** (song_id, word_id) — 917 mappings of which words appear in which songs

`artist_credit` is one of: "Rainbow", "Black Sabbath", "Dio"

## Routes

| Method | Path | Description |
|--------|------|-------------|
| GET | `/` | Home page — album/song selection grouped by era |
| GET | `/songs/<album_id>` | HTMX partial — song list for an album |
| POST | `/word-count` | HTMX partial — live word pool count from selections |
| POST | `/generate` | HTMX partial — generates bingo card grids |
| POST | `/print` | Full page — print-friendly layout, auto-opens print dialog |

## Bingo Card Rules

- 5x5 grid, center square is always FREE
- 24 unique words randomly sampled from the pool of words belonging to selected songs/albums
- Each card gets a different random arrangement
- Minimum 24 words required in pool; warns user if too few songs selected
- 1-8 cards can be generated at once

## Discography Coverage

All Ronnie James Dio eras are included:

- **Rainbow** (3 albums, 1975-1978): Ritchie Blackmore's Rainbow, Rising, Long Live Rock 'n' Roll
- **Black Sabbath** (3 albums, 1980-1992): Heaven and Hell, Mob Rules, Dehumanizer
- **Dio** (10 albums, 1983-2004): Holy Diver through Master of the Moon

## Key Design Decisions

- Album checkbox selects all songs in that album; individual songs can also be picked after expanding
- Word pool is the UNION of words from selected albums and individually selected songs
- `init_db.py` drops and recreates the database from scratch each run
- No authentication or persistent state — this is a print-and-play party game
